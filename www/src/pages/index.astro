---
import IndexLayout from "@/layouts/Index.astro";
import { type Locale } from "@/utils/get-locale";

const serverLocale =
  (Astro.request.headers
    .get("accept-language")
    ?.split(",")[0]
    ?.split("-")[0] as keyof Locale) || "en";
---

<IndexLayout locale={serverLocale} />

<script>
  import { getLocale } from "@/utils/get-locale";

  const layout = document.querySelector("html");
  if (layout) {
    layout.lang = getLocale();
  }
</script>
